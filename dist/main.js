(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(t){e(1,arguments);var o=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===o?new Date(t.getTime()):"number"==typeof t||"[object Number]"===o?new Date(t):("string"!=typeof t&&"[object String]"!==o||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function o(o){e(1,arguments);var n=t(o);return n.setHours(0,0,0,0),n}function n(t,n){e(2,arguments);var l=o(t),a=o(n);return l.getTime()===a.getTime()}function l(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function a(o,n){e(1,arguments);var a=n||{},d=a.locale,i=d&&d.options&&d.options.weekStartsOn,c=null==i?0:l(i),s=null==a.weekStartsOn?c:l(a.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var r=t(o),u=r.getDay(),m=(u<s?7:0)+u-s;return r.setDate(r.getDate()-m),r.setHours(0,0,0,0),r}function d(t,o,n){e(2,arguments);var l=a(t,n),d=a(o,n);return l.getTime()===d.getTime()}const i="my.projects",c="my.allTab";let s=JSON.parse(localStorage.getItem(i))||[],r=JSON.parse(localStorage.getItem(c))||{title:"all",todos:[]};function u(){localStorage.setItem(i,JSON.stringify(s))}let m={title:"today",todos:[]},v={title:"thisWeek",todos:[]};const f=document.querySelector("#projectsContainer");function p(){u(),function(){for(;f.firstChild;)f.removeChild(f.firstChild)}(),s.forEach((e=>{let t=document.createElement("button");t.classList.add("tab"),t.classList.add("project"),t.id=e.title;let o=document.createElement("div");o.classList.add("projectTitle"),o.textContent=e.title;let n=document.createElement("button");n.classList.add("deleteProjectBtn"),n.textContent="🗑",t.appendChild(o),t.appendChild(n),f.appendChild(t)}))}const y=document.querySelector(".todoContainer");function h(e,t){e.todos.push(t)}function L(e){localStorage.setItem(c,JSON.stringify(r)),u(),function(){for(;y.firstChild;)y.removeChild(y.firstChild)}(),function(e){e.todos.forEach((e=>{let t=document.createElement("li");t.classList.add("todo"),t.id=e.title;let o=document.createElement("input");o.type="checkbox",o.classList.add("checkbox");let n=document.createElement("div");n.classList.add("title"),n.textContent=e.title;let l=document.createElement("div");l.classList.add("desc"),l.textContent=e.desc;let a=document.createElement("div");a.classList.add("date"),a.textContent=e.date,1==e.complete&&(t.classList.add("checked"),o.checked=!0);let d=document.createElement("button");d.classList.add("editTodoBtn"),d.textContent="📝";let i=document.createElement("button");i.classList.add("deleteTodoBtn"),i.textContent="🗑",t.appendChild(o),t.appendChild(n),t.appendChild(l),t.appendChild(a),t.appendChild(d),t.appendChild(i),y.appendChild(t)}))}(e)}const S=document.querySelector("#all"),g=document.querySelector("#today"),E=document.querySelector("#thisWeek"),C=document.querySelector(".sidebar");let b=r;p(),L(b),g.addEventListener("click",(()=>{(function(){let t=r.todos.filter((t=>function(t){return e(1,arguments),n(t,Date.now())}(new Date(t.date))));m.todos=t})(),L(b)})),E.addEventListener("click",(()=>{(function(){let t=r.todos.filter((t=>function(t,o){return e(1,arguments),d(t,Date.now(),o)}(new Date(t.date))));v.todos=t})(),L(b)})),C.addEventListener("click",(e=>{let t=e.target,o=t.id,n=document.querySelectorAll(".tab");if("tab"===t.classList[0]){if(n.forEach((e=>e.classList.remove("current"))),t.classList.add("current"),"project"===t.classList[1]){let e=s.filter((e=>e.title===o))[0];b=e,newTodoBtn.classList.remove("hidden")}else"all"===o?(b=r,newTodoBtn.classList.remove("hidden")):"today"===o?(b=m,newTodoBtn.classList.add("hidden")):(b=v,newTodoBtn.classList.add("hidden"));L(b)}})),y.addEventListener("click",(e=>{let t=e.target.classList[0],o=e.target.parentElement.id,n=b.todos.filter((e=>e.title===o))[0];if("checkbox"===t&&(n.complete?n.complete=!1:n.complete=!0,L(b)),"editTodoBtn"===t){if("No date"===n.date)var l="";else l=new Date(n.date).toISOString().split("T")[0];T.editingTodo(n.title,n.desc,l)}if("deleteTodoBtn"===t){let e=n.origin,t=r.todos.findIndex((e=>e.title==o)),l=b.todos.findIndex((e=>e.title==o));if("all"===e)"today"!==b.title&&"thisWeek"!==b.title||b.todos.splice(l,1);else{let t=s.filter((t=>t.title===e))[0],n=t.todos.findIndex((e=>e.title==o));"today"===b.title||"thisWeek"===b.title?(b.todos.splice(l,1),t.todos.splice(n,1)):(b.title,t.todos.splice(n,1))}r.todos.splice(t,1),L(b)}})),f.addEventListener("click",(e=>{let t=e.target.classList[0],o=e.target.parentElement.id,n=s.findIndex((e=>e.title===o));if("deleteProjectBtn"===t){let e=document.querySelectorAll(".tab");s.splice(n,1),r.todos=r.todos.filter((e=>e.origin!==o)),b=r,e.forEach((e=>e.classList.remove("current"))),S.classList.add("current"),L(b),p()}}));const T=(()=>{const e=document.querySelector("#newTodoBtn"),t=document.querySelector("#todoModal"),o=document.querySelector("#overlay"),n=document.querySelector("#todoModalTitle"),l=document.querySelector("#todoModalCloseBtn"),a=document.querySelector("#todoName"),d=document.querySelector("#todoDetails"),i=document.querySelector("#todoDate"),c=document.querySelector("#submitTodoBtn");let s;function u(){null!=t&&(t.classList.add("active"),o.classList.add("active"))}function m(){null!=t&&(t.classList.remove("active"),o.classList.remove("active"),a.value="",d.value="",i.value="")}function v(e,t){return e.indexOf(t)>=0}return e.addEventListener("click",(()=>{n.textContent="New Todo",c.textContent="Add",u()})),l.addEventListener("click",(()=>{m()})),o.addEventListener("click",(()=>{m()})),c.addEventListener("click",(e=>{if(e.preventDefault(),""===i.value)var t="No date";else t=new Date(i.value.split("-")).toDateString();if(""===a.value)alert("Todo name can't be empty");else if("Edit Todo"===n.textContent)a.value!==s.title&&v(r.todos.map((e=>e.title)),a.value)?alert("Todo name must be unique"):(o=s,l=a.value,c=d.value,u=t,o.title=l,o.desc=c,o.date=u,L(b),a.value="",d.value="",i.value="",m());else if(v(r.todos.map((e=>e.title)),a.value))alert("Todo name must be unique");else{let e=((e,t,o,n,l)=>({title:e,desc:t,date:o,complete:!1,origin:l}))(a.value,d.value,t,0,b.title);"all"===b.title?h(b,e):(h(b,e),r.todos.push(e)),L(b),a.value="",d.value="",i.value="",m()}var o,l,c,u})),{openTodoModal:u,closeTodoModal:m,checkDuplicate:v,editingTodo:function(e,t,o){n.textContent="Edit Todo",c.textContent="Change",u(),a.value=e,d.value=t,i.value=o,s=b.todos.filter((t=>t.title===e))[0]}}})();(()=>{const e=document.querySelector("#newProjectBtn"),t=document.querySelector("#projectModal"),o=document.querySelector("#overlay"),n=document.querySelector("#projectModalCloseBtn"),l=document.querySelector("#projectName"),a=document.querySelector("#submitProjectBtn");function d(){null!=t&&(t.classList.remove("active"),o.classList.remove("active"),l.value="")}e.addEventListener("click",(()=>{null!=t&&(t.classList.add("active"),o.classList.add("active"))})),n.addEventListener("click",(()=>{d()})),o.addEventListener("click",(()=>{d()})),a.addEventListener("click",(e=>{e.preventDefault();let t=l.value;if(""===t)alert("Project name can't be empty");else if(o=s.map((e=>e.title)),n=t,o.indexOf(n)>=0)alert("Project name must be unique");else{a={title:l.value,todos:[]},s.push(a),p(),l.value="",d(),document.querySelector(`#${b.title}`).classList.add("current")}var o,n,a}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUYxVXhDekYsTUFBTyxJQUtsQk4sRUFBU2tDLEtBQUtkLEdFdVVOTCxJQUNBaUcsRUFBWWpCLE1BQVEsR0FDcEJtQixJQUNrQnJHLFNBQVNDLGNBQWMsSUFBSW9DLEVBQVc3QyxTQUM1Q2tCLFVBQVVDLElBQUksV0FuQ2xDLElBQXdCeUUsRUFBTzVGLEVGelNSZSxNRTBRRCxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS90b0RhdGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3N0YXJ0T2ZEYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzU2FtZURheS9pbmRleC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi90b0ludGVnZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3N0YXJ0T2ZXZWVrL2luZGV4LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1NhbWVXZWVrL2luZGV4LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2xvY2FsU3RvcmFnZS5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9wcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy90b2Rvcy5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNUb2RheS9pbmRleC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNUaGlzV2Vlay9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZXF1aXJlZEFyZ3MocmVxdWlyZWQsIGFyZ3MpIHtcbiAgaWYgKGFyZ3MubGVuZ3RoIDwgcmVxdWlyZWQpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHJlcXVpcmVkICsgJyBhcmd1bWVudCcgKyAocmVxdWlyZWQgPiAxID8gJ3MnIDogJycpICsgJyByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3MubGVuZ3RoICsgJyBwcmVzZW50Jyk7XG4gIH1cbn0iLCJpbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSB0b0RhdGVcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGFuIGluc3RhbmNlIG9mIERhdGUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIGl0cyBjbG9uZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBudW1iZXIsIGl0IGlzIHRyZWF0ZWQgYXMgYSB0aW1lc3RhbXAuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIG5vbmUgb2YgdGhlIGFib3ZlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBJbnZhbGlkIERhdGUuXG4gKlxuICogKipOb3RlKio6ICphbGwqIERhdGUgYXJndW1lbnRzIHBhc3NlZCB0byBhbnkgKmRhdGUtZm5zKiBmdW5jdGlvbiBpcyBwcm9jZXNzZWQgYnkgYHRvRGF0ZWAuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gYXJndW1lbnQgLSB0aGUgdmFsdWUgdG8gY29udmVydFxuICogQHJldHVybnMge0RhdGV9IHRoZSBwYXJzZWQgZGF0ZSBpbiB0aGUgbG9jYWwgdGltZSB6b25lXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ2xvbmUgdGhlIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUobmV3IERhdGUoMjAxNCwgMSwgMTEsIDExLCAzMCwgMzApKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCB0aGUgdGltZXN0YW1wIHRvIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUoMTM5MjA5ODQzMDAwMClcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9EYXRlKGFyZ3VtZW50KSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgYXJnU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3VtZW50KTsgLy8gQ2xvbmUgdGhlIGRhdGVcblxuICBpZiAoYXJndW1lbnQgaW5zdGFuY2VvZiBEYXRlIHx8IHR5cGVvZiBhcmd1bWVudCA9PT0gJ29iamVjdCcgJiYgYXJnU3RyID09PSAnW29iamVjdCBEYXRlXScpIHtcbiAgICAvLyBQcmV2ZW50IHRoZSBkYXRlIHRvIGxvc2UgdGhlIG1pbGxpc2Vjb25kcyB3aGVuIHBhc3NlZCB0byBuZXcgRGF0ZSgpIGluIElFMTBcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQuZ2V0VGltZSgpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnQgPT09ICdudW1iZXInIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgTnVtYmVyXScpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGlmICgodHlwZW9mIGFyZ3VtZW50ID09PSAnc3RyaW5nJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IFN0cmluZ10nKSAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4oXCJTdGFydGluZyB3aXRoIHYyLjAuMC1iZXRhLjEgZGF0ZS1mbnMgZG9lc24ndCBhY2NlcHQgc3RyaW5ncyBhcyBkYXRlIGFyZ3VtZW50cy4gUGxlYXNlIHVzZSBgcGFyc2VJU09gIHRvIHBhcnNlIHN0cmluZ3MuIFNlZTogaHR0cHM6Ly9naXQuaW8vZmp1bGVcIik7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG5cbiAgICAgIGNvbnNvbGUud2FybihuZXcgRXJyb3IoKS5zdGFjayk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cbn0iLCJpbXBvcnQgdG9EYXRlIGZyb20gXCIuLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGVcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgc3RhcnQgb2YgYSBkYXlcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSBkYXkgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFR1ZSBTZXAgMDIgMjAxNCAwMDowMDowMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0YXJ0T2ZEYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gZGF0ZTtcbn0iLCJpbXBvcnQgc3RhcnRPZkRheSBmcm9tIFwiLi4vc3RhcnRPZkRheS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgaXNTYW1lRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aCk/XG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBmaXJzdCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgc2Vjb25kIGRhdGUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZXMgYXJlIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKVxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIgMDY6MDA6MDAgYW5kIDQgU2VwdGVtYmVyIDE4OjAwOjAwIGluIHRoZSBzYW1lIGRheT9cbiAqIHZhciByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCwgNiwgMCksIG5ldyBEYXRlKDIwMTQsIDgsIDQsIDE4LCAwKSlcbiAqIC8vPT4gdHJ1ZVxuICogXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyIGFuZCA0IE9jdG9iZXIgaW4gdGhlIHNhbWUgZGF5P1xuICogdmFyIHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0KSwgbmV3IERhdGUoMjAxNCwgOSwgNCkpXG4gKiAvLz0+IGZhbHNlXG4gKiBcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIsIDIwMTQgYW5kIDQgU2VwdGVtYmVyLCAyMDE1IGluIHRoZSBzYW1lIGRheT9cbiAqIHZhciByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCksIG5ldyBEYXRlKDIwMTUsIDgsIDQpKVxuICogLy89PiBmYWxzZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzU2FtZURheShkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCkge1xuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGVMZWZ0U3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZGlydHlEYXRlTGVmdCk7XG4gIHZhciBkYXRlUmlnaHRTdGFydE9mRGF5ID0gc3RhcnRPZkRheShkaXJ0eURhdGVSaWdodCk7XG4gIHJldHVybiBkYXRlTGVmdFN0YXJ0T2ZEYXkuZ2V0VGltZSgpID09PSBkYXRlUmlnaHRTdGFydE9mRGF5LmdldFRpbWUoKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b0ludGVnZXIoZGlydHlOdW1iZXIpIHtcbiAgaWYgKGRpcnR5TnVtYmVyID09PSBudWxsIHx8IGRpcnR5TnVtYmVyID09PSB0cnVlIHx8IGRpcnR5TnVtYmVyID09PSBmYWxzZSkge1xuICAgIHJldHVybiBOYU47XG4gIH1cblxuICB2YXIgbnVtYmVyID0gTnVtYmVyKGRpcnR5TnVtYmVyKTtcblxuICBpZiAoaXNOYU4obnVtYmVyKSkge1xuICAgIHJldHVybiBudW1iZXI7XG4gIH1cblxuICByZXR1cm4gbnVtYmVyIDwgMCA/IE1hdGguY2VpbChudW1iZXIpIDogTWF0aC5mbG9vcihudW1iZXIpO1xufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vX2xpYi90b0ludGVnZXIvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucy5cbiAqIEBwYXJhbSB7TG9jYWxlfSBbb3B0aW9ucy5sb2NhbGU9ZGVmYXVsdExvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdC4gU2VlIFtMb2NhbGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvTG9jYWxlfVxuICogQHBhcmFtIHswfDF8MnwzfDR8NXw2fSBbb3B0aW9ucy53ZWVrU3RhcnRzT249MF0gLSB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayAoMCAtIFN1bmRheSlcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgc3RhcnQgb2YgYSB3ZWVrXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLndlZWtTdGFydHNPbmAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDZcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFN1biBBdWcgMzEgMjAxNCAwMDowMDowMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0aGUgd2VlayBzdGFydHMgb24gTW9uZGF5LCB0aGUgc3RhcnQgb2YgdGhlIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApLCB7IHdlZWtTdGFydHNPbjogMSB9KVxuICogLy89PiBNb24gU2VwIDAxIDIwMTQgMDA6MDA6MDBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGFydE9mV2VlayhkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIG9wdGlvbnMgPSBkaXJ0eU9wdGlvbnMgfHwge307XG4gIHZhciBsb2NhbGUgPSBvcHRpb25zLmxvY2FsZTtcbiAgdmFyIGxvY2FsZVdlZWtTdGFydHNPbiA9IGxvY2FsZSAmJiBsb2NhbGUub3B0aW9ucyAmJiBsb2NhbGUub3B0aW9ucy53ZWVrU3RhcnRzT247XG4gIHZhciBkZWZhdWx0V2Vla1N0YXJ0c09uID0gbG9jYWxlV2Vla1N0YXJ0c09uID09IG51bGwgPyAwIDogdG9JbnRlZ2VyKGxvY2FsZVdlZWtTdGFydHNPbik7XG4gIHZhciB3ZWVrU3RhcnRzT24gPSBvcHRpb25zLndlZWtTdGFydHNPbiA9PSBudWxsID8gZGVmYXVsdFdlZWtTdGFydHNPbiA6IHRvSW50ZWdlcihvcHRpb25zLndlZWtTdGFydHNPbik7IC8vIFRlc3QgaWYgd2Vla1N0YXJ0c09uIGlzIGJldHdlZW4gMCBhbmQgNiBfYW5kXyBpcyBub3QgTmFOXG5cbiAgaWYgKCEod2Vla1N0YXJ0c09uID49IDAgJiYgd2Vla1N0YXJ0c09uIDw9IDYpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3dlZWtTdGFydHNPbiBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNiBpbmNsdXNpdmVseScpO1xuICB9XG5cbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7XG4gIHZhciBkaWZmID0gKGRheSA8IHdlZWtTdGFydHNPbiA/IDcgOiAwKSArIGRheSAtIHdlZWtTdGFydHNPbjtcbiAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gZGlmZik7XG4gIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIHJldHVybiBkYXRlO1xufSIsImltcG9ydCBzdGFydE9mV2VlayBmcm9tIFwiLi4vc3RhcnRPZldlZWsvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5cbi8qKlxuICogQG5hbWUgaXNTYW1lV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpP1xuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucy5cbiAqIEBwYXJhbSB7TG9jYWxlfSBbb3B0aW9ucy5sb2NhbGU9ZGVmYXVsdExvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdC4gU2VlIFtMb2NhbGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvTG9jYWxlfVxuICogQHBhcmFtIHswfDF8MnwzfDR8NXw2fSBbb3B0aW9ucy53ZWVrU3RhcnRzT249MF0gLSB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayAoMCAtIFN1bmRheSlcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZXMgYXJlIGluIHRoZSBzYW1lIHdlZWsgKGFuZCBtb250aCBhbmQgeWVhcilcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLndlZWtTdGFydHNPbmAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDZcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDMxIEF1Z3VzdCAyMDE0IGFuZCA0IFNlcHRlbWJlciAyMDE0IGluIHRoZSBzYW1lIHdlZWs/XG4gKiB2YXIgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCA3LCAzMSksIG5ldyBEYXRlKDIwMTQsIDgsIDQpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHdlZWsgc3RhcnRzIHdpdGggTW9uZGF5LFxuICogLy8gYXJlIDMxIEF1Z3VzdCAyMDE0IGFuZCA0IFNlcHRlbWJlciAyMDE0IGluIHRoZSBzYW1lIHdlZWs/XG4gKiB2YXIgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCA3LCAzMSksIG5ldyBEYXRlKDIwMTQsIDgsIDQpLCB7XG4gKiAgIHdlZWtTdGFydHNPbjogMVxuICogfSlcbiAqIC8vPT4gZmFsc2VcbiAqIFxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSAxIEphbnVhcnkgMjAxNCBhbmQgMSBKYW51YXJ5IDIwMTUgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqIHZhciByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDAsIDEpLCBuZXcgRGF0ZSgyMDE1LCAwLCAxKSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNTYW1lV2VlayhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCwgZGlydHlPcHRpb25zKSB7XG4gIHJlcXVpcmVkQXJncygyLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZUxlZnRTdGFydE9mV2VlayA9IHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZUxlZnQsIGRpcnR5T3B0aW9ucyk7XG4gIHZhciBkYXRlUmlnaHRTdGFydE9mV2VlayA9IHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZVJpZ2h0LCBkaXJ0eU9wdGlvbnMpO1xuICByZXR1cm4gZGF0ZUxlZnRTdGFydE9mV2Vlay5nZXRUaW1lKCkgPT09IGRhdGVSaWdodFN0YXJ0T2ZXZWVrLmdldFRpbWUoKTtcbn0iLCJpbXBvcnQgeyBpc1RvZGF5LCBpc1RoaXNXZWVrIH0gZnJvbSAnZGF0ZS1mbnMnO1xuY29uc3QgTE9DQUxfU1RPUkFHRV9QUk9KRUNUX0tFWSA9ICdteS5wcm9qZWN0cyc7XG5jb25zdCBMT0NBTF9TVE9SQUdFX0FMTF9LRVkgPSAnbXkuYWxsVGFiJztcbmV4cG9ydCBsZXQgcHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKExPQ0FMX1NUT1JBR0VfUFJPSkVDVF9LRVkpKSB8fCBbXTtcbmV4cG9ydCBsZXQgYWxsID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMT0NBTF9TVE9SQUdFX0FMTF9LRVkpKSB8fCB7IHRpdGxlOiAnYWxsJywgdG9kb3M6IFtdIH07XG5cbmV4cG9ydCBmdW5jdGlvbiBzYXZlQWxsVGFiKCkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfQUxMX0tFWSwgSlNPTi5zdHJpbmdpZnkoYWxsKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gc2F2ZVByb2plY3RzKCkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfUFJPSkVDVF9LRVksIEpTT04uc3RyaW5naWZ5KHByb2plY3RzKSk7XG59XG5cbi8vIHRvZGF5IGFuZCB0aGlzV2VlayB0YWJzIGFyZSBkb25lIGRpZmZlcmVudGx5OiB0aGVpciB0b2RvcyBhcmUgZHluYW1pY2FsbHlcbi8vIGdlbmVyYXRlZCBiYXNlZCBvbiB0aGUgZGF0ZSwgbm8gbG9jYWwgc3RvcmFnZS5cblxuZXhwb3J0IGxldCB0b2RheSA9IHsgdGl0bGU6ICd0b2RheScsIHRvZG9zOiBbXSB9O1xuXG5leHBvcnQgbGV0IHRoaXNXZWVrID0geyB0aXRsZTogJ3RoaXNXZWVrJywgdG9kb3M6IFtdIH07XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUb2RheSgpIHtcbiAgICBsZXQgZHVlVG9kYXkgPSBhbGwudG9kb3MuZmlsdGVyKHRvZG8gPT4gaXNUb2RheShuZXcgRGF0ZSh0b2RvLmRhdGUpKSk7XG4gICAgdG9kYXkudG9kb3MgPSBkdWVUb2RheTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVRoaXNXZWVrKCkge1xuICAgIGxldCBkdWVUaGlzV2VlayA9IGFsbC50b2Rvcy5maWx0ZXIodG9kbyA9PiBpc1RoaXNXZWVrKG5ldyBEYXRlKHRvZG8uZGF0ZSkpKTtcbiAgICB0aGlzV2Vlay50b2RvcyA9IGR1ZVRoaXNXZWVrO1xufVxuIiwiaW1wb3J0IHsgcHJvamVjdHMsIHNhdmVQcm9qZWN0cyB9IGZyb20gJy4vbG9jYWxTdG9yYWdlLmpzJztcblxuZXhwb3J0IGNvbnN0IHByb2plY3RzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3RzQ29udGFpbmVyJyk7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVQcm9qZWN0ID0gKHRpdGxlKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGl0bGUsIHRvZG9zOiBbXVxuICAgIH07XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkUHJvamVjdChwcm9qZWN0KSB7XG4gICAgcHJvamVjdHMucHVzaChwcm9qZWN0KTtcbn1cblxuZnVuY3Rpb24gY2xlYXJQcm9qZWN0cygpIHtcbiAgICB3aGlsZSAocHJvamVjdHNDb250YWluZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICBwcm9qZWN0c0NvbnRhaW5lci5yZW1vdmVDaGlsZChwcm9qZWN0c0NvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlQcm9qZWN0cygpIHtcbiAgICAvKlxuICAgIDxidXR0b24gY2xhc3M9XCJ0YWIgcHJvamVjdFwiIGlkPSdwcm9qZWN0LnRpdGxlJz5cbiAgICAgICAgPGRpdiBjbGFzcz1cInByb2plY3RUaXRsZVwiPnByb2plY3QudGl0bGU8L2Rpdj4gXG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJkZWxldGVQcm9qZWN0QnRuXCI+8J+XkTwvYnV0dG9uPlxuICAgIDwvYnV0dG9uPiBcbiAgICAqL1xuICAgIHByb2plY3RzLmZvckVhY2gocHJvamVjdCA9PiB7XG4gICAgICAgIGxldCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ3RhYicpO1xuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgncHJvamVjdCcpO1xuICAgICAgICBidG4uaWQgPSBwcm9qZWN0LnRpdGxlO1xuXG4gICAgICAgIGxldCBwcm9qZWN0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgcHJvamVjdFRpdGxlLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3RUaXRsZScpO1xuICAgICAgICBwcm9qZWN0VGl0bGUudGV4dENvbnRlbnQgPSBwcm9qZWN0LnRpdGxlO1xuXG4gICAgICAgIGxldCBkZWxldGVQcm9qZWN0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGRlbGV0ZVByb2plY3RCdG4uY2xhc3NMaXN0LmFkZCgnZGVsZXRlUHJvamVjdEJ0bicpO1xuICAgICAgICBkZWxldGVQcm9qZWN0QnRuLnRleHRDb250ZW50ID0gJ1xcdXsxRjVEMX0nO1xuXG4gICAgICAgIGJ0bi5hcHBlbmRDaGlsZChwcm9qZWN0VGl0bGUpO1xuICAgICAgICBidG4uYXBwZW5kQ2hpbGQoZGVsZXRlUHJvamVjdEJ0bik7XG5cbiAgICAgICAgcHJvamVjdHNDb250YWluZXIuYXBwZW5kQ2hpbGQoYnRuKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclByb2plY3RzKCkge1xuICAgIHNhdmVQcm9qZWN0cygpO1xuICAgIGNsZWFyUHJvamVjdHMoKTtcbiAgICBkaXNwbGF5UHJvamVjdHMoKTtcbn0iLCJpbXBvcnQgeyBzYXZlQWxsVGFiLCBzYXZlUHJvamVjdHMgfSBmcm9tICcuL2xvY2FsU3RvcmFnZS5qcyc7XG5cbmV4cG9ydCBjb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG9Db250YWluZXInKTtcblxuLy8gb3JpZ2luIGlzIHdoZXJlIHRoZSB0b2RvIHdhcyBjcmVhdGVkXG5leHBvcnQgY29uc3QgY3JlYXRlVG9kbyA9ICh0aXRsZSwgZGVzYywgZGF0ZSwgY29tcGxldGUsIG9yaWdpbikgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRpdGxlLCBkZXNjLCBkYXRlLCBjb21wbGV0ZSwgb3JpZ2luXG4gICAgfTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRUb2RvKHRhYiwgdG9kbykge1xuICAgIHRhYi50b2Rvcy5wdXNoKHRvZG8pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZWRpdFRvZG8odG9kbywgbmV3VGl0bGUsIG5ld0Rlc2MsIG5ld0RhdGUpIHtcbiAgICB0b2RvLnRpdGxlID0gbmV3VGl0bGU7XG4gICAgdG9kby5kZXNjID0gbmV3RGVzYztcbiAgICB0b2RvLmRhdGUgPSBuZXdEYXRlO1xufVxuXG5mdW5jdGlvbiBjbGVhclRvZG9zKCkge1xuICAgIHdoaWxlICh0b2RvQ29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgdG9kb0NvbnRhaW5lci5yZW1vdmVDaGlsZCh0b2RvQ29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZGlzcGxheVRvZG9zKHRhYikge1xuICAgIC8qXG4gICAgPGxpIGNsYXNzPVwidG9kb1wiIGlkPSd0b2RvLnRpdGxlJz5cbiAgICAgICAgPGlucHV0IGNsYXNzPSdjaGVja2JveCcgdHlwZT1jaGVja2JveD5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRpdGxlXCI+VGl0bGU8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRlc2NcIj5EZXNjPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkYXRlXCI+RGF0ZTwvZGl2PlxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZWRpdFRvZG9CdG5cIj7wn5OdPC9idXR0b24+XG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJkZWxldGVUb2RvQnRuXCI+8J+XkTwvYnV0dG9uPlxuICAgIDwvbGk+XG4gICAgKi9cbiAgICB0YWIudG9kb3MuZm9yRWFjaCh0b2RvID0+IHtcbiAgICAgICAgbGV0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgbGkuY2xhc3NMaXN0LmFkZCgndG9kbycpO1xuICAgICAgICBsaS5pZCA9IHRvZG8udGl0bGU7XG5cbiAgICAgICAgbGV0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgY2hlY2tib3gudHlwZSA9IFwiY2hlY2tib3hcIjtcbiAgICAgICAgY2hlY2tib3guY2xhc3NMaXN0LmFkZCgnY2hlY2tib3gnKTtcblxuICAgICAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGl0bGUuY2xhc3NMaXN0LmFkZCgndGl0bGUnKTtcbiAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSB0b2RvLnRpdGxlO1xuXG4gICAgICAgIGxldCBkZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRlc2MuY2xhc3NMaXN0LmFkZCgnZGVzYycpO1xuICAgICAgICBkZXNjLnRleHRDb250ZW50ID0gdG9kby5kZXNjO1xuXG4gICAgICAgIGxldCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRhdGUuY2xhc3NMaXN0LmFkZCgnZGF0ZScpO1xuICAgICAgICBkYXRlLnRleHRDb250ZW50ID0gdG9kby5kYXRlO1xuXG4gICAgICAgIGlmICh0b2RvLmNvbXBsZXRlID09IHRydWUpIHtcbiAgICAgICAgICAgIGxpLmNsYXNzTGlzdC5hZGQoJ2NoZWNrZWQnKTtcbiAgICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGVkaXRUb2RvQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGVkaXRUb2RvQnRuLmNsYXNzTGlzdC5hZGQoJ2VkaXRUb2RvQnRuJyk7XG4gICAgICAgIGVkaXRUb2RvQnRuLnRleHRDb250ZW50ID0gJ1xcdXsxRjRERH0nO1xuXG4gICAgICAgIGxldCBkZWxldGVUb2RvQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGRlbGV0ZVRvZG9CdG4uY2xhc3NMaXN0LmFkZCgnZGVsZXRlVG9kb0J0bicpO1xuICAgICAgICBkZWxldGVUb2RvQnRuLnRleHRDb250ZW50ID0gJ1xcdXsxRjVEMX0nO1xuXG4gICAgICAgIGxpLmFwcGVuZENoaWxkKGNoZWNrYm94KTtcbiAgICAgICAgbGkuYXBwZW5kQ2hpbGQodGl0bGUpO1xuICAgICAgICBsaS5hcHBlbmRDaGlsZChkZXNjKTtcbiAgICAgICAgbGkuYXBwZW5kQ2hpbGQoZGF0ZSk7XG4gICAgICAgIGxpLmFwcGVuZENoaWxkKGVkaXRUb2RvQnRuKTtcbiAgICAgICAgbGkuYXBwZW5kQ2hpbGQoZGVsZXRlVG9kb0J0bik7XG4gICAgICAgIHRvZG9Db250YWluZXIuYXBwZW5kQ2hpbGQobGkpO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyVG9kb3ModGFiKSB7XG4gICAgc2F2ZUFsbFRhYigpO1xuICAgIHNhdmVQcm9qZWN0cygpO1xuICAgIGNsZWFyVG9kb3MoKTtcbiAgICBkaXNwbGF5VG9kb3ModGFiKTtcbn1cblxuXG5cblxuXG4iLCJpbXBvcnQgeyBhbGwsIHByb2plY3RzLCB0b2RheSwgdGhpc1dlZWssIHVwZGF0ZVRvZGF5LCB1cGRhdGVUaGlzV2VlayB9IGZyb20gJy4vbG9jYWxTdG9yYWdlLmpzJztcbmltcG9ydCB7IHByb2plY3RzQ29udGFpbmVyLCBjcmVhdGVQcm9qZWN0LCBhZGRQcm9qZWN0LCByZW5kZXJQcm9qZWN0cyB9IGZyb20gJy4vcHJvamVjdHMuanMnO1xuaW1wb3J0IHsgdG9kb0NvbnRhaW5lciwgY3JlYXRlVG9kbywgYWRkVG9kbywgZWRpdFRvZG8sIHJlbmRlclRvZG9zIH0gZnJvbSAnLi90b2Rvcy5qcyc7XG5cbmNvbnN0IGFsbFRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbGwnKTtcbmNvbnN0IHRvZGF5VGFiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZGF5Jyk7XG5jb25zdCB0aGlzV2Vla1RhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aGlzV2VlaycpO1xuY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyJyk7XG5cblxuXG4vLyBpbml0aWFsaXplXG5sZXQgY3VycmVudFRhYiA9IGFsbDtcbnJlbmRlclByb2plY3RzKCk7XG5yZW5kZXJUb2RvcyhjdXJyZW50VGFiKTtcblxuXG5cbi8vIHRvZGF5ICYgdGhpcyB3ZWVrIHRhYnMgKGR5bmFtaWNhbGx5IGdlbmVyYXRlZCBiYXNlZCBvbiBkYXRlKVxudG9kYXlUYWIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdXBkYXRlVG9kYXkoKTtcbiAgICByZW5kZXJUb2RvcyhjdXJyZW50VGFiKTtcbn0pO1xuXG50aGlzV2Vla1RhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICB1cGRhdGVUaGlzV2VlaygpO1xuICAgIHJlbmRlclRvZG9zKGN1cnJlbnRUYWIpO1xufSk7XG5cblxuXG4vLyBzZXR0aW5nIHRoZSBjdXJyZW50IHRhYlxuc2lkZWJhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgbGV0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgIGxldCBpZCA9IHRhcmdldC5pZDtcbiAgICBsZXQgdGFicyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWInKTtcblxuICAgIC8vIGFkZGluZyAmIHJlbW92aW5nIGhpZGRlbiBjbGFzcyB0byByZW1vdmUgYWRkIHRvZG8gYnRuIGluIHRoZSB0b2RheSAmIFxuICAgIC8vIHRoaXMgd2VlayB0YWJzIGJjIHlvdSBzaG91bGQgbm90IGJlIGFibGUgdG8gYWRkIHRvZG9zIGluIHRoZXNlIHRhYnMgYXNcbiAgICAvLyB0aGVpciBjb250ZW50cyBzaG91bGQgY2hhbmdlIGR5bmFtaWNhbGx5IHcvIHRoZSBkYXRlIFxuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0WzBdID09PSAndGFiJykge1xuICAgICAgICB0YWJzLmZvckVhY2godGFiID0+IHRhYi5jbGFzc0xpc3QucmVtb3ZlKCdjdXJyZW50JykpO1xuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnY3VycmVudCcpO1xuXG4gICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0WzFdID09PSAncHJvamVjdCcpIHtcbiAgICAgICAgICAgIC8vIHRoaXMgcmV0dXJucyB0aGUgcHJvamVjdCB0aGF0IG1hdGNoZXMgdGhlIGlkXG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWRQcm9qID0gcHJvamVjdHMuZmlsdGVyKHByb2plY3QgPT4gKHByb2plY3QudGl0bGUgPT09IGlkKSlbMF07XG4gICAgICAgICAgICBjdXJyZW50VGFiID0gc2VsZWN0ZWRQcm9qO1xuICAgICAgICAgICAgbmV3VG9kb0J0bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChpZCA9PT0gJ2FsbCcpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50VGFiID0gYWxsO1xuICAgICAgICAgICAgICAgIG5ld1RvZG9CdG4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlkID09PSAndG9kYXknKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFRhYiA9IHRvZGF5O1xuICAgICAgICAgICAgICAgIG5ld1RvZG9CdG4uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRUYWIgPSB0aGlzV2VlaztcbiAgICAgICAgICAgICAgICBuZXdUb2RvQnRuLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlbmRlclRvZG9zKGN1cnJlbnRUYWIpO1xuICAgIH1cbn0pO1xuXG5cblxuLy8gZnVuY3Rpb25hbGl0eSB0byBidXR0b25zIG9uIHRvZG9zICYgcHJvamVjdHNcbnRvZG9Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGxldCB0YXJnZXRUeXBlID0gZS50YXJnZXQuY2xhc3NMaXN0WzBdO1xuICAgIGxldCB0YXJnZXRJRCA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuaWQ7XG4gICAgLy8gaWQgYWxsb3dzIHVzIHRvIHRhcmdldCB0aGUgc3BlY2lmaWMgdG9kbyBpbiB0aGUgYXJyYXkgd2hpY2ggIFxuICAgIC8vIHdlIGNhbiBtb2RpZnkgYW5kIGRpc3BsYXkgdGhlc2UgbW9kaWZpY2F0aW9uc1xuICAgIGxldCB0YXJnZXRUb2RvID0gY3VycmVudFRhYi50b2Rvcy5maWx0ZXIodG9kbyA9PiAodG9kby50aXRsZSA9PT0gdGFyZ2V0SUQpKVswXTtcbiAgICAvLyBsZXQgdGFyZ2V0SW5kZXggPSBjdXJyZW50VGFiLnRvZG9zLmZpbmRJbmRleCh0b2RvID0+ICh0b2RvLnRpdGxlID09IHRhcmdldElEKSlcblxuICAgIGlmICh0YXJnZXRUeXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgIC8vIGlmIHRvZG8gY29tcGxldGUsIHNldCBpdCB0byBpbmNvbXBsZXRlIGFuZCB2aWNlIHZlcnNhXG4gICAgICAgIHRhcmdldFRvZG8uY29tcGxldGUgPyB0YXJnZXRUb2RvLmNvbXBsZXRlID0gZmFsc2UgOiB0YXJnZXRUb2RvLmNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgcmVuZGVyVG9kb3MoY3VycmVudFRhYik7XG4gICAgfVxuXG4gICAgaWYgKHRhcmdldFR5cGUgPT09ICdlZGl0VG9kb0J0bicpIHtcblxuICAgICAgICAvLyByZXB1cnBvc2UgZGF0ZXMgc28gaW5wdXQgdHlwZT0nRGF0ZScgY2FuIGFjY2VwdCB0aGVtXG4gICAgICAgIC8vIOKAoiAnTm8gZGF0ZScgPSAnJyBcbiAgICAgICAgLy8g4oCiICdUaHUgSnVuIDAyIDIwMjInID0gJzIwMjItMDYtMDInXG4gICAgICAgIGlmICh0YXJnZXRUb2RvLmRhdGUgPT09ICdObyBkYXRlJykge1xuICAgICAgICAgICAgdmFyIGRhdGUgPSAnJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodGFyZ2V0VG9kby5kYXRlKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICAgIH1cbiAgICAgICAgdG9kb01vZGFsU3R1ZmYuZWRpdGluZ1RvZG8odGFyZ2V0VG9kby50aXRsZSwgdGFyZ2V0VG9kby5kZXNjLCBkYXRlKTtcblxuICAgIH1cblxuICAgIGlmICh0YXJnZXRUeXBlID09PSAnZGVsZXRlVG9kb0J0bicpIHtcbiAgICAgICAgbGV0IHRhcmdldE9yaWdpbiA9IHRhcmdldFRvZG8ub3JpZ2luO1xuICAgICAgICBsZXQgaW5kZXhJbkFsbFRhYiA9IGFsbC50b2Rvcy5maW5kSW5kZXgodG9kbyA9PiAodG9kby50aXRsZSA9PSB0YXJnZXRJRCkpO1xuICAgICAgICBsZXQgaW5kZXhJbkN1cnJlbnRUYWIgPSBjdXJyZW50VGFiLnRvZG9zLmZpbmRJbmRleCh0b2RvID0+ICh0b2RvLnRpdGxlID09IHRhcmdldElEKSk7XG5cbiAgICAgICAgaWYgKHRhcmdldE9yaWdpbiA9PT0gJ2FsbCcpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50VGFiLnRpdGxlID09PSAndG9kYXknIHx8IGN1cnJlbnRUYWIudGl0bGUgPT09ICd0aGlzV2VlaycpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50VGFiLnRvZG9zLnNwbGljZShpbmRleEluQ3VycmVudFRhYiwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgb3JpZ2luVGFiID0gcHJvamVjdHMuZmlsdGVyKHByb2plY3QgPT4gKHByb2plY3QudGl0bGUgPT09IHRhcmdldE9yaWdpbikpWzBdO1xuICAgICAgICAgICAgbGV0IGluZGV4SW5PcmlnaW4gPSBvcmlnaW5UYWIudG9kb3MuZmluZEluZGV4KHRvZG8gPT4gKHRvZG8udGl0bGUgPT0gdGFyZ2V0SUQpKTtcblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRUYWIudGl0bGUgPT09ICd0b2RheScgfHwgY3VycmVudFRhYi50aXRsZSA9PT0gJ3RoaXNXZWVrJykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRUYWIudG9kb3Muc3BsaWNlKGluZGV4SW5DdXJyZW50VGFiLCAxKTtcbiAgICAgICAgICAgICAgICBvcmlnaW5UYWIudG9kb3Muc3BsaWNlKGluZGV4SW5PcmlnaW4sIDEpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50VGFiLnRpdGxlID09PSAnYWxsJykge1xuICAgICAgICAgICAgICAgIG9yaWdpblRhYi50b2Rvcy5zcGxpY2UoaW5kZXhJbk9yaWdpbiwgMSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9yaWdpblRhYi50b2Rvcy5zcGxpY2UoaW5kZXhJbk9yaWdpbiwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYWxsLnRvZG9zLnNwbGljZShpbmRleEluQWxsVGFiLCAxKTtcbiAgICAgICAgcmVuZGVyVG9kb3MoY3VycmVudFRhYik7XG4gICAgfVxuXG59KTtcblxucHJvamVjdHNDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGxldCB0YXJnZXRUeXBlID0gZS50YXJnZXQuY2xhc3NMaXN0WzBdO1xuICAgIGxldCB0YXJnZXRJRCA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuaWQ7XG4gICAgbGV0IGluZGV4ID0gcHJvamVjdHMuZmluZEluZGV4KHggPT4geC50aXRsZSA9PT0gdGFyZ2V0SUQpO1xuXG4gICAgaWYgKHRhcmdldFR5cGUgPT09ICdkZWxldGVQcm9qZWN0QnRuJykge1xuICAgICAgICBsZXQgdGFicyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWInKTtcbiAgICAgICAgLy8gcmVtdmUgcHJvaiAmIHRvZG9zIGZyb20gdGhpcyBwcm9qIGluIHRoZSBhbGwgdGFiLCBjdXJyZW50VGFiID0gYWxsLCByZW5kZXJcbiAgICAgICAgcHJvamVjdHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgYWxsLnRvZG9zID0gYWxsLnRvZG9zLmZpbHRlcih0b2RvID0+IHRvZG8ub3JpZ2luICE9PSB0YXJnZXRJRCk7XG4gICAgICAgIGN1cnJlbnRUYWIgPSBhbGw7XG4gICAgICAgIHRhYnMuZm9yRWFjaCh0YWIgPT4gdGFiLmNsYXNzTGlzdC5yZW1vdmUoJ2N1cnJlbnQnKSk7XG4gICAgICAgIGFsbFRhYi5jbGFzc0xpc3QuYWRkKCdjdXJyZW50Jyk7XG4gICAgICAgIHJlbmRlclRvZG9zKGN1cnJlbnRUYWIpO1xuICAgICAgICByZW5kZXJQcm9qZWN0cygpO1xuICAgIH1cbn0pO1xuXG5cblxuLy8gbmV3IHRvZG8gJiBuZXcgcHJvamVjdCBtb2RhbHNcbmNvbnN0IHRvZG9Nb2RhbFN0dWZmID0gKCgpID0+IHtcbiAgICAvLyBTRUxFQ1RPUlNcbiAgICBjb25zdCBuZXdUb2RvQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ld1RvZG9CdG4nKTtcbiAgICBjb25zdCB0b2RvTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kb01vZGFsJyk7XG4gICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvdmVybGF5Jyk7XG4gICAgY29uc3QgdG9kb01vZGFsVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kb01vZGFsVGl0bGUnKTtcbiAgICBjb25zdCB0b2RvTW9kYWxDbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvTW9kYWxDbG9zZUJ0bicpO1xuICAgIGNvbnN0IHRvZG9OYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZG9OYW1lJyk7XG4gICAgY29uc3QgdG9kb0RldGFpbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kb0RldGFpbHMnKTtcbiAgICBjb25zdCB0b2RvRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvRGF0ZScpO1xuICAgIGNvbnN0IHN1Ym1pdFRvZG9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3VibWl0VG9kb0J0bicpO1xuICAgIGxldCB0YXJnZXRUb2RvO1xuXG4gICAgLy8gTUVUSE9EU1xuICAgIGZ1bmN0aW9uIG9wZW5Ub2RvTW9kYWwoKSB7XG4gICAgICAgIGlmICh0b2RvTW9kYWwgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdG9kb01vZGFsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsb3NlVG9kb01vZGFsKCkge1xuICAgICAgICBpZiAodG9kb01vZGFsID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvZG9Nb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICB0b2RvTmFtZS52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgdG9kb0RldGFpbHMudmFsdWUgPSAnJztcbiAgICAgICAgICAgIHRvZG9EYXRlLnZhbHVlID0gJyc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjb25zdW1lcyBhcnJheSBvZiBzdHJpbmdzICYgc3RyaW5nIGFuZCBwcm9kdWNlcyBcbiAgICAvLyB0cnVlIG9yIGZhbHNlIHRvIGlmIHRoYXQgc3RyaW5nIGlzIGEgZHVwbGljYXRlXG4gICAgZnVuY3Rpb24gY2hlY2tEdXBsaWNhdGUoYXJyYXksIHRpdGxlKSB7XG4gICAgICAgIHJldHVybiAoYXJyYXkuaW5kZXhPZih0aXRsZSkgPj0gMCkgPyB0cnVlIDogZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZWRpdGluZ1RvZG8obmFtZSwgZGV0YWlscywgZGF0ZSkge1xuICAgICAgICB0b2RvTW9kYWxUaXRsZS50ZXh0Q29udGVudCA9ICdFZGl0IFRvZG8nO1xuICAgICAgICBzdWJtaXRUb2RvQnRuLnRleHRDb250ZW50ID0gJ0NoYW5nZSc7XG4gICAgICAgIG9wZW5Ub2RvTW9kYWwoKTtcbiAgICAgICAgdG9kb05hbWUudmFsdWUgPSBuYW1lO1xuICAgICAgICB0b2RvRGV0YWlscy52YWx1ZSA9IGRldGFpbHM7XG4gICAgICAgIHRvZG9EYXRlLnZhbHVlID0gZGF0ZTtcbiAgICAgICAgdGFyZ2V0VG9kbyA9IGN1cnJlbnRUYWIudG9kb3MuZmlsdGVyKHRvZG8gPT4gKHRvZG8udGl0bGUgPT09IG5hbWUpKVswXTtcbiAgICB9XG5cbiAgICAvLyBFVkVOVCBMSVNURU5FUlNcbiAgICBuZXdUb2RvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0b2RvTW9kYWxUaXRsZS50ZXh0Q29udGVudCA9ICdOZXcgVG9kbyc7XG4gICAgICAgIHN1Ym1pdFRvZG9CdG4udGV4dENvbnRlbnQgPSAnQWRkJztcbiAgICAgICAgb3BlblRvZG9Nb2RhbCgpO1xuICAgIH0pO1xuXG4gICAgdG9kb01vZGFsQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNsb3NlVG9kb01vZGFsKCk7XG4gICAgfSk7XG5cbiAgICBvdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjbG9zZVRvZG9Nb2RhbCgpO1xuICAgIH0pO1xuXG4gICAgc3VibWl0VG9kb0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgLy8gcmVwdXJwb3NlIGRhdGVzICh2YXIgaGVyZSBvciBlbHNlIGRhdGUgaXMgbm90IGFjY2Vzc2libGUpXG4gICAgICAgIC8vIOKAoiAnJyA9ICdObyBkYXRlJyAoaW5zdGVhZCBvZiAnSW52YWxpZCBkYXRlJylcbiAgICAgICAgLy8g4oCiICcyMDIyLTA2LTAyJyA9ICdUaHUgSnVuIDAyIDIwMjInIChtb3JlIHJlYWRhYmxlKVxuICAgICAgICBpZiAodG9kb0RhdGUudmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICB2YXIgZGF0ZSA9ICdObyBkYXRlJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodG9kb0RhdGUudmFsdWUuc3BsaXQoJy0nKSkudG9EYXRlU3RyaW5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodG9kb05hbWUudmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICBhbGVydChcIlRvZG8gbmFtZSBjYW4ndCBiZSBlbXB0eVwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0b2RvTW9kYWxUaXRsZS50ZXh0Q29udGVudCA9PT0gJ0VkaXQgVG9kbycpIHtcbiAgICAgICAgICAgIGlmICgodG9kb05hbWUudmFsdWUgIT09IHRhcmdldFRvZG8udGl0bGUpICYmXG4gICAgICAgICAgICAgICAgKGNoZWNrRHVwbGljYXRlKGFsbC50b2Rvcy5tYXAodG9kbyA9PiB0b2RvLnRpdGxlKSwgdG9kb05hbWUudmFsdWUpKSkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiVG9kbyBuYW1lIG11c3QgYmUgdW5pcXVlXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlZGl0VG9kbyh0YXJnZXRUb2RvLCB0b2RvTmFtZS52YWx1ZSwgdG9kb0RldGFpbHMudmFsdWUsIGRhdGUpO1xuICAgICAgICAgICAgICAgIHJlbmRlclRvZG9zKGN1cnJlbnRUYWIpO1xuICAgICAgICAgICAgICAgIHRvZG9OYW1lLnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgdG9kb0RldGFpbHMudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICB0b2RvRGF0ZS52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgIGNsb3NlVG9kb01vZGFsKCk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChjaGVja0R1cGxpY2F0ZShhbGwudG9kb3MubWFwKHRvZG8gPT4gdG9kby50aXRsZSksIHRvZG9OYW1lLnZhbHVlKSkge1xuICAgICAgICAgICAgYWxlcnQoXCJUb2RvIG5hbWUgbXVzdCBiZSB1bmlxdWVcIik7XG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGxldCBuZXdUb2RvID1cbiAgICAgICAgICAgICAgICBjcmVhdGVUb2RvKFxuICAgICAgICAgICAgICAgICAgICB0b2RvTmFtZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdG9kb0RldGFpbHMudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGUsXG4gICAgICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFiLnRpdGxlXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gd2hlbiBhZGQgbmV3IHRvZG8sIGFkZCB0byBjdXJyZW50IHRhYiAmIGFsbCB0YWIgKGJjIGFsbCB0YWIgY2FuXG4gICAgICAgICAgICAvLyBhY2Nlc3MgQUxMIHRvZG9zKS4gSWYgd2UncmUgaW4gdGhlIGFsbCB0YWIsIGp1c3QgYWRkIGl0IG9uY2Ugb2ZjLlxuICAgICAgICAgICAgaWYgKGN1cnJlbnRUYWIudGl0bGUgPT09ICdhbGwnKSB7XG4gICAgICAgICAgICAgICAgYWRkVG9kbyhjdXJyZW50VGFiLCBuZXdUb2RvKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYWRkVG9kbyhjdXJyZW50VGFiLCBuZXdUb2RvKTtcbiAgICAgICAgICAgICAgICBhbGwudG9kb3MucHVzaChuZXdUb2RvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlbmRlclRvZG9zKGN1cnJlbnRUYWIpO1xuICAgICAgICAgICAgdG9kb05hbWUudmFsdWUgPSAnJztcbiAgICAgICAgICAgIHRvZG9EZXRhaWxzLnZhbHVlID0gJyc7XG4gICAgICAgICAgICB0b2RvRGF0ZS52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgY2xvc2VUb2RvTW9kYWwoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgb3BlblRvZG9Nb2RhbCxcbiAgICAgICAgY2xvc2VUb2RvTW9kYWwsXG4gICAgICAgIGNoZWNrRHVwbGljYXRlLFxuICAgICAgICBlZGl0aW5nVG9kb1xuICAgIH07XG59KSgpO1xuXG5jb25zdCBwcm9qZWN0TW9kYWxTdHVmZiA9ICgoKSA9PiB7XG4gICAgLy8gU0VMRUNUT1JTXG4gICAgY29uc3QgbmV3UHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdQcm9qZWN0QnRuJyk7XG4gICAgY29uc3QgcHJvamVjdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3RNb2RhbCcpO1xuICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3ZlcmxheScpO1xuICAgIGNvbnN0IHByb2plY3RNb2RhbENsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3RNb2RhbENsb3NlQnRuJyk7XG4gICAgY29uc3QgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdE5hbWUnKTtcbiAgICBjb25zdCBzdWJtaXRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N1Ym1pdFByb2plY3RCdG4nKTtcblxuICAgIC8vIE1FVEhPRFNcbiAgICBmdW5jdGlvbiBvcGVuUHJvamVjdE1vZGFsKCkge1xuICAgICAgICBpZiAocHJvamVjdE1vZGFsID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb2plY3RNb2RhbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbG9zZVByb2plY3RNb2RhbCgpIHtcbiAgICAgICAgaWYgKHByb2plY3RNb2RhbCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9qZWN0TW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgcHJvamVjdE5hbWUudmFsdWUgPSAnJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGNvbnN1bWVzIGFycmF5IG9mIHN0cmluZ3MgJiBzdHJpbmcgYW5kIHByb2R1Y2VzIFxuICAgIC8vIHRydWUgb3IgZmFsc2UgdG8gaWYgdGhhdCBzdHJpbmcgaXMgYSBkdXBsaWNhdGVcbiAgICBmdW5jdGlvbiBjaGVja0R1cGxpY2F0ZShhcnJheSwgdGl0bGUpIHtcbiAgICAgICAgcmV0dXJuIChhcnJheS5pbmRleE9mKHRpdGxlKSA+PSAwKSA/IHRydWUgOiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBFVkVOVCBMSVNURU5FUlNcbiAgICBuZXdQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBvcGVuUHJvamVjdE1vZGFsKCk7XG4gICAgfSk7XG5cbiAgICBwcm9qZWN0TW9kYWxDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY2xvc2VQcm9qZWN0TW9kYWwoKTtcbiAgICB9KTtcblxuICAgIG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNsb3NlUHJvamVjdE1vZGFsKCk7XG4gICAgfSk7XG5cbiAgICAvLyBJZiB0aXRsZSBub24tZW1wdHkgJiBub24tZHVwbGljYXRlLCBjcmVhdGUgbmV3IHByb2plY3QgJiBhZGQgdG8gIFxuICAgIC8vIHByb2plY3RzW10sIGNsZWFyICYgZGlzcGxheSBwcm9qZWN0cywgY2xlYXIgZm9ybSwgY2xvc2UgbW9kYWxcbiAgICBzdWJtaXRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBsZXQgcHJvamVjdFRpdGxlID0gcHJvamVjdE5hbWUudmFsdWU7XG5cbiAgICAgICAgaWYgKHByb2plY3RUaXRsZSA9PT0gJycpIHtcbiAgICAgICAgICAgIGFsZXJ0KFwiUHJvamVjdCBuYW1lIGNhbid0IGJlIGVtcHR5XCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGNoZWNrRHVwbGljYXRlKHByb2plY3RzLm1hcChwcm9qZWN0ID0+IHByb2plY3QudGl0bGUpLCBwcm9qZWN0VGl0bGUpKSB7XG4gICAgICAgICAgICBhbGVydChcIlByb2plY3QgbmFtZSBtdXN0IGJlIHVuaXF1ZVwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBuZXdQcm9qZWN0ID0gY3JlYXRlUHJvamVjdChwcm9qZWN0TmFtZS52YWx1ZSk7XG4gICAgICAgICAgICBhZGRQcm9qZWN0KG5ld1Byb2plY3QpO1xuICAgICAgICAgICAgcmVuZGVyUHJvamVjdHMoKTtcbiAgICAgICAgICAgIHByb2plY3ROYW1lLnZhbHVlID0gJyc7XG4gICAgICAgICAgICBjbG9zZVByb2plY3RNb2RhbCgpO1xuICAgICAgICAgICAgbGV0IHNlbGVjdGVkVGFiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Y3VycmVudFRhYi50aXRsZX1gKTtcbiAgICAgICAgICAgIHNlbGVjdGVkVGFiLmNsYXNzTGlzdC5hZGQoJ2N1cnJlbnQnKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgb3BlblByb2plY3RNb2RhbCxcbiAgICAgICAgY2xvc2VQcm9qZWN0TW9kYWwsXG4gICAgICAgIGNoZWNrRHVwbGljYXRlLFxuICAgIH07XG59KSgpOyIsImltcG9ydCBpc1NhbWVEYXkgZnJvbSBcIi4uL2lzU2FtZURheS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgaXNUb2RheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBJcyB0aGUgZ2l2ZW4gZGF0ZSB0b2RheT9cbiAqIEBwdXJlIGZhbHNlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBJcyB0aGUgZ2l2ZW4gZGF0ZSB0b2RheT9cbiAqXG4gKiA+IOKaoO+4jyBQbGVhc2Ugbm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gaXMgbm90IHByZXNlbnQgaW4gdGhlIEZQIHN1Ym1vZHVsZSBhc1xuICogPiBpdCB1c2VzIGBEYXRlLm5vdygpYCBpbnRlcm5hbGx5IGhlbmNlIGltcHVyZSBhbmQgY2FuJ3QgYmUgc2FmZWx5IGN1cnJpZWQuXG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZSBpcyB0b2RheVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDYgT2N0b2JlciAyMDE0LCBpcyA2IE9jdG9iZXIgMTQ6MDA6MDAgdG9kYXk/XG4gKiB2YXIgcmVzdWx0ID0gaXNUb2RheShuZXcgRGF0ZSgyMDE0LCA5LCA2LCAxNCwgMCkpXG4gKiAvLz0+IHRydWVcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1RvZGF5KGRpcnR5RGF0ZSkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgcmV0dXJuIGlzU2FtZURheShkaXJ0eURhdGUsIERhdGUubm93KCkpO1xufSIsImltcG9ydCBpc1NhbWVXZWVrIGZyb20gXCIuLi9pc1NhbWVXZWVrL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuXG4vKipcbiAqIEBuYW1lIGlzVGhpc1dlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIGluIHRoZSBzYW1lIHdlZWsgYXMgdGhlIGN1cnJlbnQgZGF0ZT9cbiAqIEBwdXJlIGZhbHNlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBJcyB0aGUgZ2l2ZW4gZGF0ZSBpbiB0aGUgc2FtZSB3ZWVrIGFzIHRoZSBjdXJyZW50IGRhdGU/XG4gKlxuICogPiDimqDvuI8gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzIG5vdCBwcmVzZW50IGluIHRoZSBGUCBzdWJtb2R1bGUgYXNcbiAqID4gaXQgdXNlcyBgRGF0ZS5ub3coKWAgaW50ZXJuYWxseSBoZW5jZSBpbXB1cmUgYW5kIGNhbid0IGJlIHNhZmVseSBjdXJyaWVkLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gdGhlIG9iamVjdCB3aXRoIG9wdGlvbnNcbiAqIEBwYXJhbSB7TG9jYWxlfSBbb3B0aW9ucy5sb2NhbGU9ZGVmYXVsdExvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdC4gU2VlIFtMb2NhbGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvTG9jYWxlfVxuICogQHBhcmFtIHswfDF8MnwzfDR8NXw2fSBbb3B0aW9ucy53ZWVrU3RhcnRzT249MF0gLSB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayAoMCAtIFN1bmRheSlcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZSBpcyBpbiB0aGlzIHdlZWtcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMud2Vla1N0YXJ0c09uYCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyAyNSBTZXB0ZW1iZXIgMjAxNCwgaXMgMjEgU2VwdGVtYmVyIDIwMTQgaW4gdGhpcyB3ZWVrP1xuICogdmFyIHJlc3VsdCA9IGlzVGhpc1dlZWsobmV3IERhdGUoMjAxNCwgOCwgMjEpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDI1IFNlcHRlbWJlciAyMDE0IGFuZCB3ZWVrIHN0YXJ0cyB3aXRoIE1vbmRheVxuICogLy8gaXMgMjEgU2VwdGVtYmVyIDIwMTQgaW4gdGhpcyB3ZWVrP1xuICogdmFyIHJlc3VsdCA9IGlzVGhpc1dlZWsobmV3IERhdGUoMjAxNCwgOCwgMjEpLCB7IHdlZWtTdGFydHNPbjogMSB9KVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1RoaXNXZWVrKGRpcnR5RGF0ZSwgb3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgcmV0dXJuIGlzU2FtZVdlZWsoZGlydHlEYXRlLCBEYXRlLm5vdygpLCBvcHRpb25zKTtcbn0iXSwibmFtZXMiOlsicmVxdWlyZWRBcmdzIiwicmVxdWlyZWQiLCJhcmdzIiwibGVuZ3RoIiwiVHlwZUVycm9yIiwidG9EYXRlIiwiYXJndW1lbnQiLCJhcmd1bWVudHMiLCJhcmdTdHIiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJEYXRlIiwiZ2V0VGltZSIsImNvbnNvbGUiLCJ3YXJuIiwiRXJyb3IiLCJzdGFjayIsIk5hTiIsInN0YXJ0T2ZEYXkiLCJkaXJ0eURhdGUiLCJkYXRlIiwic2V0SG91cnMiLCJpc1NhbWVEYXkiLCJkaXJ0eURhdGVMZWZ0IiwiZGlydHlEYXRlUmlnaHQiLCJkYXRlTGVmdFN0YXJ0T2ZEYXkiLCJkYXRlUmlnaHRTdGFydE9mRGF5IiwidG9JbnRlZ2VyIiwiZGlydHlOdW1iZXIiLCJudW1iZXIiLCJOdW1iZXIiLCJpc05hTiIsIk1hdGgiLCJjZWlsIiwiZmxvb3IiLCJzdGFydE9mV2VlayIsImRpcnR5T3B0aW9ucyIsIm9wdGlvbnMiLCJsb2NhbGUiLCJsb2NhbGVXZWVrU3RhcnRzT24iLCJ3ZWVrU3RhcnRzT24iLCJkZWZhdWx0V2Vla1N0YXJ0c09uIiwiUmFuZ2VFcnJvciIsImRheSIsImdldERheSIsImRpZmYiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImlzU2FtZVdlZWsiLCJkYXRlTGVmdFN0YXJ0T2ZXZWVrIiwiZGF0ZVJpZ2h0U3RhcnRPZldlZWsiLCJMT0NBTF9TVE9SQUdFX1BST0pFQ1RfS0VZIiwiTE9DQUxfU1RPUkFHRV9BTExfS0VZIiwicHJvamVjdHMiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwidGl0bGUiLCJ0b2RvcyIsInNhdmVQcm9qZWN0cyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJ0b2RheSIsInRoaXNXZWVrIiwicHJvamVjdHNDb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJyZW5kZXJQcm9qZWN0cyIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImNsZWFyUHJvamVjdHMiLCJmb3JFYWNoIiwicHJvamVjdCIsImJ0biIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpZCIsInByb2plY3RUaXRsZSIsInRleHRDb250ZW50IiwiZGVsZXRlUHJvamVjdEJ0biIsImFwcGVuZENoaWxkIiwidG9kb0NvbnRhaW5lciIsImFkZFRvZG8iLCJ0YWIiLCJ0b2RvIiwicHVzaCIsInJlbmRlclRvZG9zIiwiY2xlYXJUb2RvcyIsImxpIiwiY2hlY2tib3giLCJ0eXBlIiwiZGVzYyIsImNvbXBsZXRlIiwiY2hlY2tlZCIsImVkaXRUb2RvQnRuIiwiZGVsZXRlVG9kb0J0biIsImRpc3BsYXlUb2RvcyIsImFsbFRhYiIsInRvZGF5VGFiIiwidGhpc1dlZWtUYWIiLCJzaWRlYmFyIiwiY3VycmVudFRhYiIsImFkZEV2ZW50TGlzdGVuZXIiLCJkdWVUb2RheSIsImZpbHRlciIsIm5vdyIsImlzVG9kYXkiLCJ1cGRhdGVUb2RheSIsImR1ZVRoaXNXZWVrIiwiaXNUaGlzV2VlayIsInVwZGF0ZVRoaXNXZWVrIiwiZSIsInRhcmdldCIsInRhYnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlIiwic2VsZWN0ZWRQcm9qIiwibmV3VG9kb0J0biIsInRhcmdldFR5cGUiLCJ0YXJnZXRJRCIsInBhcmVudEVsZW1lbnQiLCJ0YXJnZXRUb2RvIiwidG9JU09TdHJpbmciLCJzcGxpdCIsInRvZG9Nb2RhbFN0dWZmIiwiZWRpdGluZ1RvZG8iLCJ0YXJnZXRPcmlnaW4iLCJvcmlnaW4iLCJpbmRleEluQWxsVGFiIiwiaW5kZXhJbkN1cnJlbnRUYWIiLCJmaW5kSW5kZXgiLCJzcGxpY2UiLCJvcmlnaW5UYWIiLCJpbmRleEluT3JpZ2luIiwiaW5kZXgiLCJ4IiwidG9kb01vZGFsIiwib3ZlcmxheSIsInRvZG9Nb2RhbFRpdGxlIiwidG9kb01vZGFsQ2xvc2VCdG4iLCJ0b2RvTmFtZSIsInRvZG9EZXRhaWxzIiwidG9kb0RhdGUiLCJzdWJtaXRUb2RvQnRuIiwib3BlblRvZG9Nb2RhbCIsImNsb3NlVG9kb01vZGFsIiwidmFsdWUiLCJjaGVja0R1cGxpY2F0ZSIsImFycmF5IiwiaW5kZXhPZiIsInByZXZlbnREZWZhdWx0IiwidG9EYXRlU3RyaW5nIiwiYWxlcnQiLCJuZXdUaXRsZSIsIm5ld0Rlc2MiLCJuZXdEYXRlIiwibmV3VG9kbyIsImNyZWF0ZVRvZG8iLCJuYW1lIiwiZGV0YWlscyIsIm5ld1Byb2plY3RCdG4iLCJwcm9qZWN0TW9kYWwiLCJwcm9qZWN0TW9kYWxDbG9zZUJ0biIsInByb2plY3ROYW1lIiwic3VibWl0UHJvamVjdEJ0biIsImNsb3NlUHJvamVjdE1vZGFsIiwibWFwIl0sInNvdXJjZVJvb3QiOiIifQ==